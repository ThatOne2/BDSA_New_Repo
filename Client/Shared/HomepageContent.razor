@using TrialProject.Shared


@if (hasSearched)
{
    <h1>Results for: "@searchOutput"</h1>
}
else
{
    <h1>Welcome to TheStart of a great project or thesis!</h1>
}

<div class = "searchBar" id = "bar">
    <input type="text" id="searchInput" placeholder="Search" @bind="@searchInput" @onkeyup="@Enter">
    <button title="searchButton" class="searchBtn" @onclick="Search">
        <span class="oi oi-magnifying-glass"></span>
    </button>
</div>


@if (hasSearched)
{
    <div class = "resultPane">
        @foreach (var proj in projects)
        {
            <div class = "projectContainer white">
                <div class = "projectContainerLeft">
                    <div class = "pictureWannabe"></div>
                    <p>@proj.supervisor</p>
                </div>
                <div class = "projectContainerRight">
                    <h2>@proj.name</h2>
                    <p>@proj.shortDescription</p>
                </div>
            </div>
        }
    </div>
    
}
else 
{
    <HomepageContentWelcome />
}

@code {
    private bool hasSearched = false;
    private int count = 0;
    private string searchInput = "";
    private string searchOutput = "";
    private List<Project>? projects;
    
    private void Search()
    {
        if (!string.IsNullOrEmpty(searchInput))
        {
            hasSearched = true;
            count ++;
            searchOutput = searchInput;

        }
    }
    public void Enter(KeyboardEventArgs e)
    {
        if (e.Code == "Enter" || e.Code == "NumpadEnter")
        {
            Search();
        }
    }
    protected override async Task OnInitializedAsync()
    {
        projects = new List<Project>();
        var p1 = new Project{name = "Fun Project", supervisor = "Bente Andersen the 3rd", shortDescription = "This is the coolest project you can imagne! like... Oh my gawd it's sooo fucking cool. You'll get all the swag points? I wouldn't know if people say that anymore. I'm a professor! I have a fucking PHD"};
        var p2 = new Project{name = "Not so fun Project", supervisor = "Felix", shortDescription = "I don't actually care for this project"};
        projects.Add(p1);
        projects.Add(p2);
    }
}
