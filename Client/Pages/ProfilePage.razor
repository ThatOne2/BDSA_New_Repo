@using TrialProject.Shared
@inject CurrentUser currentuser
@inject HttpClient Http


<AuthorizeView>
    <NotAuthorized>
        <h5>Welcome, John Doe (please log in to proceed to your profile page)</h5>
    </NotAuthorized>
    <Authorized>

        <body>
            <div class="top_background">
            <div class="profile_in_short">
                <div class="p_pic">
                    <img src="css\open-iconic\user_icon.svg" alt="profile pic" width="100px" />
                </div>
                <h4>@context.User.Identity?.Name</h4>
            </div>
        </div>

        <div class="student_or_supervisor">
            <p role="status"  >Please specify whether you are a student or a professor:</p>

            <select id="role"  onchange="@SetRole">
                @if(!currentuser.isSupervisor){
                    <option value="student" selected>Student</option>
                    <option value="professor">Supervisor</option>
                } else {
                    <option value="student">Student</option>
                    <option value="professor" selected>Supervisor</option>
                }
            </select>
            @if(currentuser.isSupervisor){
                <p role="status">Hello, Supervisor Kenobi - u look amaze </p>
            }
        </div>

        <div class="divs">
            <h5>Bio</h5>
            <textarea name="bio" id="profile_bio" cols="30" rows="10" disabled=@editenable>lookin for a hootie boytoy</textarea>
        </div>
        <button class="divs">Edit</button>

        <div class="divs">
            <h5>About</h5>
            
        </div>

        <div class="divs">
            <h5>Contact</h5>
            <p>Email: tempsnapelamail.com</p>
            <p>Phone: </p>
            <p></p>
            
        </div>

        
        <div class="divs" margin-bottom=4%>
            <h5>Prevoius Projects</h5>
            
        </div>
        </body>


    </Authorized>
</AuthorizeView>

@code {
    private void SetRole(ChangeEventArgs e){
        if(e.Value.ToString() == "student") {currentuser.isSupervisor = false;}
        else currentuser.isSupervisor = true;
    }
    private void SetRoleAsStudent() => currentuser.isSupervisor = false;
    private void SetRoleAsSupervisor() => currentuser.isSupervisor = true;

    private bool editenable = false;
}